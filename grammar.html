<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Toolify Grammar Pro AI</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">

<style>
:root{
--bg:#f5f5f7;--card:#ffffffcc;--text:#1d1d1f;
--p:#0071e3;--sec:#86868b;--border:#d2d2d7;--err:#ff3b30;
}
body.dark{
--bg:#000;--card:#1c1c1ecc;--text:#f5f5f7;
--p:#0a84ff;--sec:#8e8e93;--border:#38383a;
}
*{box-sizing:border-box}
body{
margin:0;font-family:Inter;background:var(--bg);
color:var(--text);transition:.3s;
display:flex;flex-direction:column;min-height:100vh;
}
header{
max-width:1100px;margin:auto;width:100%;
padding:20px;display:flex;justify-content:space-between;align-items:center;
}
.hub-link{
text-decoration:none;font-weight:700;color:var(--p);
border:1px solid var(--p);padding:8px 16px;border-radius:20px;
}
.container{max-width:900px;margin:auto;width:90%;flex:1}
.card{
background:var(--card);backdrop-filter:blur(14px);
padding:30px;border-radius:30px;
border:1px solid var(--border);
box-shadow:0 25px 50px rgba(0,0,0,.08);
}
.controls{display:flex;gap:10px;flex-wrap:wrap;margin-bottom:15px}
.btn{
padding:10px 16px;border-radius:14px;
border:1px solid var(--border);background:transparent;
font-weight:600;cursor:pointer;color:var(--text);
}
textarea{
width:100%;height:200px;border-radius:20px;
border:1px solid var(--border);
padding:20px;font-size:16px;
background:transparent;color:var(--text);
resize:none;
}
.stats{
display:flex;justify-content:space-between;
font-size:12px;font-weight:700;color:var(--sec);margin-top:10px;
}
.main{
width:100%;margin-top:20px;padding:18px;
font-size:18px;border:none;border-radius:18px;
background:linear-gradient(135deg,#0071e3,#00c6ff);
color:#fff;font-weight:800;cursor:pointer;
}
.output{
background:var(--card);border-radius:25px;
padding:25px;border:2px solid var(--p);
line-height:1.8;
}
.error{
background:rgba(255,59,48,.2);
color:var(--err);padding:2px 5px;border-radius:6px;
}
.section{margin-top:25px}
.history{
margin-top:20px;padding:15px;border-radius:20px;
border:1px solid var(--border);
}
.history-item{
font-size:13px;padding:8px;
border-bottom:1px solid var(--border);
cursor:pointer;
}
footer{
padding:30px;text-align:center;
border-top:1px solid var(--border);
font-size:13px;color:var(--sec);
}
.login{
max-width:350px;margin:80px auto;
text-align:center;
}
.login input{
width:100%;padding:12px;border-radius:12px;
border:1px solid var(--border);margin-bottom:10px;
}
</style>
</head>

<body>

<header>
<a href="index.html" class="hub-link">‚¨Ö TOOLBOX HUB</a>
<button class="btn" onclick="toggle()">üåì</button>
</header>

<div id="app"></div>

<footer>
Developed with <span style="color:#ff3b30">‚ù§</span> by Mohak
</footer>

<script>
/* ---------------- LOGIN ---------------- */
let user=localStorage.getItem("user");

const app=document.getElementById("app");

if(!user){
app.innerHTML=`
<div class="login card">
<h2>Login</h2>
<input id="email" placeholder="Enter email">
<button class="btn" onclick="login()">Login</button>
</div>`;
}else loadTool();

function login(){
const e=document.getElementById("email").value.trim();
if(!e)return alert("Enter email");
localStorage.setItem("user",e);
location.reload();
}

/* ---------------- TOOL ---------------- */
function loadTool(){
app.innerHTML=`
<div class="container">
<div class="card">
<div class="controls">
<button class="btn" onclick="upper()">UPPERCASE</button>
<button class="btn" onclick="lower()">lowercase</button>
<button class="btn" onclick="sentence()">Sentence Case</button>
<button class="btn" onclick="logout()">Logout</button>
</div>

<textarea id="input" placeholder="Paste text here..." oninput="stats()"></textarea>

<div class="stats">
<span id="w">0 Words</span>
<span id="c">0 Characters</span>
<span id="e">0 Errors</span>
</div>

<button class="main" onclick="process()">ANALYZE & FIX</button>

<div class="section">
<h3>‚ùå Highlighted Errors</h3>
<div class="output" id="highlight"></div>
</div>

<div class="section">
<h3>‚úÖ Corrected Text</h3>
<div class="output" id="fixed"></div>
<button class="btn" onclick="savePDF()">Save PDF</button>
<button class="btn" onclick="saveDOCX()">Save DOCX</button>
</div>

<div class="history">
<strong>üìú Cloud History</strong>
<div id="history"></div>
</div>

</div>
</div>`;
loadHistory();
}

/* ---------------- FUNCTIONS ---------------- */
function toggle(){
document.body.classList.toggle("dark");
localStorage.setItem("theme",document.body.classList.contains("dark"));
}
if(localStorage.getItem("theme")==="true")document.body.classList.add("dark");

function logout(){localStorage.removeItem("user");location.reload();}

const rules=[
[/\bi\b/g,"I"],[/\bthey is\b/gi,"they are"],
[/\bit are\b/gi,"it is"],[/\bdont\b/gi,"don't"],
[/\bdoesnt\b/gi,"doesn't"],[/\bisnt\b/gi,"isn't"],
[/\ba hour\b/gi,"an hour"],[/\bif i was you\b/gi,"if I were you"]
];

function stats(){
let t=document.getElementById("input").value;
document.getElementById("w").innerText=`${t?t.split(/\s+/).length:0} Words`;
document.getElementById("c").innerText=`${t.length} Characters`;
}

function upper(){input.value=input.value.toUpperCase();stats();}
function lower(){input.value=input.value.toLowerCase();stats();}
function sentence(){input.value=input.value.toLowerCase().replace(/(^\w|\.\s+\w)/g,s=>s.toUpperCase());stats();}

function process(){
let t=input.value;if(!t)return;
let errors=0,highlight=t;

rules.forEach(r=>{
if(r[0].test(highlight)){
errors++;
highlight=highlight.replace(r[0],m=>`<span class="error">${m}</span>`);
t=t.replace(r[0],r[1]);
}
});
t=t.replace(/(^\w|\.\s+\w)/g,s=>s.toUpperCase());

document.getElementById("highlight").innerHTML=highlight;
document.getElementById("fixed").innerText=t;
document.getElementById("e").innerText=`${errors} Errors`;

saveHistory(input.value,t);
loadHistory();
}

/* ---------------- SAVE FILES ---------------- */
function savePDF(){
let w=window.open("");
w.document.write(`<pre>${document.getElementById("fixed").innerText}</pre>`);
w.print();
}

function saveDOCX(){
let text=document.getElementById("fixed").innerText;
let blob=new Blob(
[`<html><body><pre>${text}</pre></body></html>`],
{type:"application/msword"}
);
let a=document.createElement("a");
a.href=URL.createObjectURL(blob);
a.download="grammar.docx";
a.click();
}

/* ---------------- HISTORY ---------------- */
function saveHistory(o,f){
let key="history_"+localStorage.getItem("user");
let h=JSON.parse(localStorage.getItem(key)||"[]");
h.unshift({o,f,time:new Date().toLocaleString()});
localStorage.setItem(key,JSON.stringify(h.slice(0,10)));
}

function loadHistory(){
let key="history_"+localStorage.getItem("user");
let h=JSON.parse(localStorage.getItem(key)||"[]");
let box=document.getElementById("history");
if(!box)return;
box.innerHTML="";
h.forEach(i=>{
let d=document.createElement("div");
d.className="history-item";
d.innerText=i.time;
d.onclick=()=>{input.value=i.o;document.getElementById("fixed").innerText=i.f;}
box.appendChild(d);
});
}
</script>

</body>
</html>
