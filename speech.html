<script>
    const synth = window.speechSynthesis;
    const textInput = document.getElementById('text-input');
    const voiceSelect = document.getElementById('voice-select');
    let voices = [];

    // Voices ko load karne ka function
    function populateVoices() {
        voices = synth.getVoices();
        if (voices.length === 0) return; // Wait if not loaded

        voiceSelect.innerHTML = voices
            .map((voice, i) => `<option value="${i}">${voice.name} (${voice.lang})</option>`)
            .join('');
    }

    // Kuch browsers mein voices load hone mein time lagta hai
    if (speechSynthesis.onvoiceschanged !== undefined) {
        speechSynthesis.onvoiceschanged = populateVoices;
    }
    
    // Initial call
    setTimeout(populateVoices, 100);

    function speak() {
        if (synth.speaking) {
            synth.cancel(); // Agar pehle se bol raha hai toh stop karein
        }
        
        if (textInput.value.trim() !== '') {
            const utter = new SpeechSynthesisUtterance(textInput.value);
            // Selected voice apply karein
            if (voices[voiceSelect.value]) {
                utter.voice = voices[voiceSelect.value];
            }
            synth.speak(utter);
        } else {
            alert("Please enter some text first!");
        }
    }

    function downloadSpeech() {
        // Browser API se direct MP3 download possible nahi hai bina server ke
        alert("Audio download (MP3) is a premium feature that requires a backend server. Use 'Play' for instant preview!");
    }
</script>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

    // Use your actual Firebase config here
    const firebaseConfig = {
        apiKey: "AIzaSyAeHDhdiTRwftUGYgrb1m19v7hm2R5rb-Y",
        authDomain: "toolbox-hub-98c03.firebaseapp.com",
        projectId: "toolbox-hub-98c03",
        appId: "1:321020105472:web:356e7c2903def7b9d859e5"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    onAuthStateChanged(auth, user => {
        if(!user) {
            window.location.href="login.html";
        }
    });
</script>

</body>
</html>
